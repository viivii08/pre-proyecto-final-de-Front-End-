<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Pedidos - Patagonia Style</title>
    <link rel="icon" type="image/png" href="pages/logo%20sin%20fondo%20(1).png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            padding-top: 70px; /* Espacio para navbar fijo */
            background: #f4f1ee;
            font-family: 'Poppins', sans-serif;
        }
        .page-header {
            background: linear-gradient(135deg, #1f3c5a, #3b5d50);
            color: white;
            padding: 40px 0;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="60" r="1" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        .page-header h1 {
            position: relative;
            z-index: 1;
            margin: 0;
            font-weight: 700;
        }
        .order-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .order-status {
            padding: 6px 16px;
            border-radius: 25px;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-processing { background: #d1ecf1; color: #0c5460; }
        .status-shipped { background: #d4edda; color: #155724; }
        .status-delivered { background: #e2e3e5; color: #383d41; }
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        .empty-state i {
            font-size: 4rem;
            color: #6c757d;
            margin-bottom: 20px;
        }
        .info-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #3b5d50;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(59, 93, 80, 0.1);
        }
        .info-card h6 {
            color: #3b5d50;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .info-card .text-muted {
            color: #6c757d !important;
        }
        @media (max-width: 768px) {
            .order-header {
                flex-direction: column;
                gap: 10px;
            }
            .page-header {
                padding: 30px 0;
            }
        }
    </style>
</head>
<body>
    <div id="navbar-container"></div>
    <div class="page-header">
        <div class="container">
            <h1><i class="bi bi-bag-check me-3"></i>Mis Pedidos</h1>
        </div>
    </div>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="empty-state" id="empty-orders">
                    <i class="bi bi-bag-x"></i>
                    <h3>No tienes pedidos aún</h3>
                    <p class="text-muted mb-4">Cuando realices tu primera compra, aparecerá aquí el estado y detalles de tus pedidos.</p>
                    <a href="tienda.html" class="btn btn-primary">
                        <i class="bi bi-shop me-2"></i>Ir a la Tienda
                    </a>
                </div>
                <div id="orders-container" style="display: none;">
                </div>
                <div class="info-card mt-4">
                    <h5><i class="bi bi-info-circle me-2"></i>Información de Envíos</h5>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h6><i class="bi bi-truck me-2"></i>Envío Gratis</h6>
                            <p class="text-muted">En compras mayores a $50.000</p>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="bi bi-clock me-2"></i>Tiempo de Entrega</h6>
                            <p class="text-muted">
                                3-5 días hábiles en Capital Federal<br>
                                5-7 días hábiles en el interior del país
                            </p>
                        </div>
                    </div>
                    <hr>
                    <p class="mb-0">
                        <strong>Nota:</strong> Los tiempos de entrega pueden variar según la disponibilidad del producto y condiciones climáticas.
                        Te notificaremos por WhatsApp sobre el estado de tu pedido.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/universal-navbar.js"></script>
    <script src="js/universal-footer.js"></script>
    <script src="js/whatsapp-global.js"></script>
    <script>
        // Sistema de gestión de pedidos
        document.addEventListener('DOMContentLoaded', function() {
            loadOrders();
        });
        function loadOrders() {
            // Simular carga de pedidos desde localStorage o API
            const orders = JSON.parse(localStorage.getItem('userOrders') || '[]');
            if (orders.length === 0) {
                document.getElementById('empty-orders').style.display = 'block';
                document.getElementById('orders-container').style.display = 'none';
            } else {
                document.getElementById('empty-orders').style.display = 'none';
                document.getElementById('orders-container').style.display = 'block';
                renderOrders(orders);
            }
        }
        function renderOrders(orders) {
            const container = document.getElementById('orders-container');
            container.innerHTML = orders.map(order => `
                <div class="order-card">
                    <div class="card-body p-4">
                        <div class="order-header">
                            <div>
                                <h5 class="card-title mb-1">Pedido #${order.id}</h5>
                                <small class="text-muted">Realizado el ${order.date}</small>
                            </div>
                            <span class="order-status status-${order.status}">
                                ${getStatusText(order.status)}
                            </span>
                        </div>
                        <div class="row">
                            <div class="col-md-8">
                                <h6>Productos:</h6>
                                <ul class="list-unstyled">
                                    ${order.items.map(item => `
                                        <li class="mb-2">
                                            <strong>${item.name}</strong> x${item.quantity}
                                            <span class="text-muted float-end">$${item.price.toLocaleString()}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                            <div class="col-md-4 text-end">
                                <h6>Total: $${order.total.toLocaleString()}</h6>
                                <button class="btn btn-outline-primary btn-sm mt-2" 
                                        onclick="viewOrderDetails('${order.id}')">
                                    <i class="bi bi-eye me-1"></i>Ver Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        function getStatusText(status) {
            const statusMap = {
                'pending': 'Pendiente',
                'processing': 'Procesando',
                'shipped': 'Enviado',
                'delivered': 'Entregado'
            };
            return statusMap[status] || 'Desconocido';
        }
        function viewOrderDetails(orderId) {
            // Función para ver detalles del pedido
            alert(`Ver detalles del pedido ${orderId}`);
            // Aquí se puede implementar un modal o redirección a página de detalles
        }
        // Función de utilidad para debounce
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = function() {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>