<!DOCTYPE html>
<!-- üåü PATAGONIA STYLE - P√ÅGINA PRINCIPAL 
     üè† Landing page del e-commerce con dise√±o profesional
     üöÄ Incluye hero section, productos destacados y funcionalidades avanzadas
     üì± Completamente responsive con Bootstrap 5.3.0 -->
<html lang="es" style="margin: 0; padding: 0; height: 100%;">
<head>
  <!-- üìã Meta tags esenciales para SEO y responsive -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patagonia Style - Tienda Online</title>
  <style>
    /* üéØ DISE√ëO PROFESIONAL LIMPIO - ELIMINAR ESPACIO DEBAJO DEL FOOTER 
       ‚ú® Reset global para eliminar m√°rgenes y espaciados inconsistentes
       üìê Box-sizing border-box para c√°lculos precisos */
    * {
      margin: 0;                /* üö´ Sin m√°rgenes por defecto */
      padding: 0;               /* üö´ Sin padding por defecto */
      box-sizing: border-box;   /* üì¶ Incluir bordes en el tama√±o */
    }
    
    /* üè† Configuraci√≥n HTML para altura completa */
    html {
      height: 100%;             /* üìè Altura del 100% de la ventana */
      margin: 0;                /* üö´ Sin m√°rgenes */
      padding: 0;               /* üö´ Sin padding */
    }
    
    /* üé® Body principal con flexbox para footer pegajoso */
    body {
      min-height: 100%;         /* üìè Altura m√≠nima completa */
      margin: 0 !important;
      padding: 0 !important;
      overflow-x: hidden !important;
      background: #e6e8ea !important;
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1 0 auto;
    }
    footer {
      flex-shrink: 0;
      margin-bottom: 0 !important;
    }
  </style>
  <link rel="icon" type="image/png" href="pages/logo%20sin%20fondo%20(1).png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Raleway:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="dropdown-fix.css">
  <link rel="stylesheet" href="css/optimizations.css">
  <link rel="stylesheet" href="css/accessibility.css">
  <link rel="stylesheet" href="css/responsive-advanced.css">
  <link rel="stylesheet" href="css/mejoras-semanticas.css">
  <link rel="stylesheet" href="css/product-cards-improved.css">
  <link rel="stylesheet" href="css/footer-fix-global.css">
  <style>
    :root {
      --primary-color: #1f3c5a;      
      --secondary-color: #3b5d50; 
      --accent-color: #b67c3a;      
      --bg-light: #f4f1ee;           
      --text-color: #2b2b2b;        
      --card-shadow: rgba(0,0,0,0.12);
      --btn-radius: 28px;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg-light);
      color: var(--text-color);
      padding-top: 50px; /* Para compensar el navbar fixed */
    }
    /* Navbar */
    .navbar {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .navbar-brand { color: #fff !important; font-family: 'Raleway', sans-serif; font-weight: 700; letter-spacing: 1px; }
    .navbar a { color: #fdfdfd !important; font-weight: 500; transition: color 0.3s; }
    .navbar a:hover { color: var(--accent-color) !important; }
    .icon-nav { font-size: 1.4rem; margin-left: 15px; cursor: pointer; color: #fff; transition: transform .2s ease, color .2s ease; }
    .icon-nav:hover { transform: scale(1.2); color: var(--accent-color); }
    /* Dropdown Styles */
    .dropdown-menu {
      background: white !important;
      border: 1px solid #ddd !important;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2) !important;
    }
    .dropdown-menu li a {
      color: #333 !important;
      font-size: 0.9rem !important;
      font-weight: 500 !important;
      text-decoration: none !important;
    }
    /* Forzar visibilidad del texto en dropdown */
    .dropdown-menu .dropdown-item {
      color: #333333 !important;
      background: transparent !important;
      font-size: 0.9rem !important;
      font-weight: 500 !important;
      padding: 12px 16px !important;
    }
    .dropdown-menu .dropdown-item:hover {
      color: #1f3c5a !important;
      background-color: #f8f9fa !important;
    }
    .dropdown-menu .dropdown-item span {
      color: #333333 !important;
      font-size: 0.9rem !important;
      font-weight: 500 !important;
      display: inline !important;
      visibility: visible !important;
    }
    .dropdown-menu .dropdown-item:hover span {
      color: #1f3c5a !important;
    }
    /* Espec√≠fico para cerrar sesi√≥n */
    .dropdown-menu .dropdown-item.text-danger {
      color: #dc3545 !important;
    }
    .dropdown-menu .dropdown-item.text-danger span {
      color: #dc3545 !important;
    }
    /* Hero Carousel */
    .carousel-item { position: relative; min-height: 500px; }
    .carousel-caption { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; z-index: 5; }
    .carousel-caption h1 { font-size: 3.5rem; font-weight: 700; text-shadow: 2px 2px 8px rgba(0,0,0,0.7); margin-bottom: 1rem; }
    .carousel-caption p { font-size: 1.5rem; text-shadow: 1px 1px 4px rgba(0,0,0,0.8); margin-bottom: 2rem; }
    /* Buttons */
    .btn-custom { background: var(--accent-color); color: #fff; font-weight: 600; border-radius: var(--btn-radius); padding: 12px 30px; font-size: 1.1rem; border: none; transition: all 0.3s; }
    .btn-custom:hover { background: #996538; color: #fff; transform: translateY(-2px); box-shadow: 0 8px 20px rgba(182, 124, 58, 0.4); }
    /* Sections */
    .section-title { text-align:center; font-size:2.5rem; margin-bottom:2rem; color: var(--primary-color); font-weight:600; position: relative; }
    .section-title::after { content: ""; width: 70px; height: 3px; background: var(--accent-color); display:block; margin:10px auto 0; border-radius:2px; }
    .card { border:none; border-radius:15px; overflow:hidden; box-shadow:0 6px 20px var(--card-shadow); transition: transform 0.3s, box-shadow 0.3s; cursor:pointer; background-color:#fff; }
    .card:hover { transform: translateY(-8px) scale(1.03); box-shadow:0 15px 30px var(--card-shadow); }
    .card-img-top { object-fit:cover; width:100%; height:250px; transition: transform 0.5s; }
    .card:hover .card-img-top { transform: scale(1.1); }
    footer { background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); padding:40px 0; color:#fff; text-align:center; font-weight:500; }
    footer a { color:#fff; text-decoration:none; margin:0 10px; }
    footer a:hover { text-decoration:underline; color: var(--accent-color); }
    .modal-body { max-height: 400px; overflow-y: auto; }
    .cart-quantity { width:60px; }
    html {
  scroll-behavior: smooth;
}
    .dropdown-menu {
      border: none;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      border-radius: 15px;
      padding: 10px 0;
      min-width: 280px;
      margin-top: 10px;
    }
    .dropdown-header {
      padding: 15px 20px;
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      margin: -10px 0 10px 0;
      border-radius: 15px 15px 0 0;
    }
    .dropdown-item {
      padding: 10px 20px;
      transition: all 0.3s ease;
      border-radius: 0;
    }
    .dropdown-item:hover {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      transform: translateX(5px);
    }
    .dropdown-item i {
      width: 20px;
      text-align: center;
    }
    /* Auth Buttons Styles */
    .btn-warning {
      background: linear-gradient(135deg, var(--accent-color), #d4941e);
      border: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .btn-warning:hover {
      background: linear-gradient(135deg, #d4941e, var(--accent-color));
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(182, 124, 58, 0.4);
    }
    /* Navbar Button Improvements */
    .navbar .btn-outline-light {
      border: 2px solid rgba(255,255,255,0.3);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    .navbar .btn-outline-light:hover {
      background: rgba(255,255,255,0.2);
      border-color: rgba(255,255,255,0.5);
      transform: translateY(-1px);
    }
    /* Search Bar Improvements */
    .input-group .form-control {
      background: rgba(255,255,255,0.15);
      border: none;
      color: white;
      backdrop-filter: blur(10px);
    }
    .input-group .form-control::placeholder {
      color: rgba(255,255,255,0.7);
    }
    .input-group .form-control:focus {
      background: rgba(255,255,255,0.25);
      color: white;
      box-shadow: none;
      border: none;
    }
    .input-group .btn {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
    }
    .input-group .btn:hover {
      background: var(--accent-color);
    }
    /* Responsive improvements */
    @media (max-width: 768px) {
      .navbar .form-control {
        min-width: 180px !important;
      }
      .btn span.d-none.d-sm-inline {
        display: none !important;
      }
      .dropdown-menu {
        min-width: 250px;
      }
      /* Carousel mobile improvements */
      .carousel-item {
        min-height: 70vh !important;
        background-size: cover !important;
      }
      .carousel-caption {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        width: 90%;
        padding: 20px;
      }
      .carousel-caption h1 {
        font-size: 2rem !important;
        margin-bottom: 10px !important;
      }
      .carousel-caption p {
        font-size: 1.1rem !important;
        margin-bottom: 15px !important;
      }
      .btn-custom {
        padding: 12px 25px !important;
        font-size: 1rem !important;
      }
    }
    @media (max-width: 576px) {
      .navbar form[role="search"] {
        min-width: 150px !important;
      }
      .navbar .btn {
        padding: 8px 12px !important;
      }
      .navbar .btn i {
        font-size: 1rem;
      }
      /* Mobile carousel specific */
      .carousel-item {
        min-height: 60vh !important;
      }
      .carousel-caption h1 {
        font-size: 1.8rem !important;
      }
      .carousel-caption p {
        font-size: 1rem !important;
      }
      .btn-custom {
        padding: 10px 20px !important;
        font-size: 0.9rem !important;
      }
    }
    /* Modal Enhancements */
    .form-control:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(31, 60, 90, 0.25);
    }
    .modal-content {
      overflow: hidden;
    }
    .modal-header {
      border: none;
    }
    .modal-body {
      background: #fafafa;
    }
    /* Estilos Compactos para Modales */
    .form-label-compact {
      font-size: 0.75rem;
      font-weight: 600;
      color: #495057;
      margin-bottom: 4px;
      display: block;
    }
    .form-control-compact {
      font-size: 0.8rem;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1.5px solid #dee2e6;
      transition: all 0.15s ease-in-out;
    }
    .form-control-compact:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.15rem rgba(31, 60, 90, 0.15);
      outline: 0;
    }
    .btn-compact {
      font-size: 0.8rem;
      padding: 8px 12px;
      border-radius: 6px;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      border: none;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .btn-compact:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(31, 60, 90, 0.3);
      color: white;
    }
    .btn-link-compact {
      font-size: 0.75rem;
      color: var(--primary-color);
      background: none;
      border: none;
      text-decoration: underline;
      padding: 0;
    }
    .btn-link-compact:hover {
      color: var(--secondary-color);
    }
    .form-check-input-sm {
      width: 0.875rem;
      height: 0.875rem;
    }
    /* Floating Label Profesional */
    .form-floating-custom {
      position: relative;
    }
    .form-control-custom {
      width: 100%;
      padding: 12px 10px 4px 10px;
      font-size: 0.8rem;
      border: 1.5px solid #dee2e6;
      border-radius: 6px;
      background: white;
      transition: all 0.2s ease;
      outline: none;
    }
    .form-control-custom:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.15rem rgba(31, 60, 90, 0.15);
    }
    .label-floating {
      position: absolute;
      top: 8px;
      left: 10px;
      font-size: 0.75rem;
      color: #6c757d;
      background: white;
      padding: 0 4px;
      pointer-events: none;
      transition: all 0.2s ease;
      transform-origin: left top;
      z-index: 2;
    }
    /* Estados del Floating Label */
    .form-control-custom:focus + .label-floating,
    .form-control-custom:not(:placeholder-shown) + .label-floating,
    .form-control-custom.has-value + .label-floating {
      top: -8px;
      font-size: 0.65rem;
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1);
    }
    /* Animaci√≥n cuando est√° vac√≠o */
    .form-control-custom:placeholder-shown + .label-floating {
      top: 8px;
      font-size: 0.75rem;
      color: #6c757d;
      font-weight: normal;
    }
    /* User Avatar Styles */
    .user-avatar, .user-avatar-large {
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    /* Search Enhancement */
    .navbar .form-control {
      border-radius: 25px;
      border: 2px solid transparent;
      background: rgba(255,255,255,0.1);
      color: white;
      backdrop-filter: blur(10px);
    }
    .navbar .form-control::placeholder {
      color: rgba(255,255,255,0.7);
    }
    .navbar .form-control:focus {
      background: rgba(255,255,255,0.15);
      border-color: var(--accent-color);
      color: white;
      box-shadow: 0 0 0 0.2rem rgba(182, 124, 58, 0.25);
    }
    .navbar .btn-outline-light {
      border-radius: 25px;
      border: 2px solid rgba(255,255,255,0.3);
      backdrop-filter: blur(10px);
    }
    .navbar .btn-outline-light:hover {
      background: var(--accent-color);
      border-color: var(--accent-color);
      transform: translateY(-1px);
    }
    /* Hero Carousel */
    .carousel-item {
      height: 90vh;
      min-height: 400px;
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
      width: 100%;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    /* Primer imagen para que se vea completa */
    .carousel-item.first-img {
      background-size: contain;
    }
    .carousel-item::after {
      content: "";
      position: absolute;
      top:0; left:0;
      width:100%; height:100%;
      background: linear-gradient(rgba(31,60,90,0.55), rgba(31,60,90,0.35));
    }
    .carousel-caption {
      position: absolute;
      top: 65%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      text-align: center;
      background: rgba(255,255,255,0.15);
      padding: 20px 30px;
      border-radius: 15px;
      backdrop-filter: blur(6px);
    }
    .carousel-caption h1 {
      font-size: 3.5rem;
      font-weight: 700;
      text-transform: uppercase;
      color:#fff;
      font-family: 'Raleway', sans-serif;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.6);
    }
    .carousel-caption p { font-size: 1.2rem; color: #fdfdfd; margin-bottom: 15px; }
    @media (max-width: 768px) {
      .carousel-caption { top: 65%; padding: 15px 20px; }
      .carousel-caption h1 { font-size: 2.2rem; }
      .carousel-caption p { font-size: 1rem; }
    }
    .btn-custom { background-color: var(--accent-color); color:#fff; border-radius: var(--btn-radius); padding: 10px 25px; text-transform: uppercase; font-weight: 600; transition: 0.3s; }
    .btn-custom:hover { background-color: #8d5c2b; transform: scale(1.05); }
    .section-title { text-align:center; font-size:2.5rem; margin-bottom:2rem; color: var(--primary-color); font-weight:600; position: relative; }
    .section-title::after { content: ""; width: 70px; height: 3px; background: var(--accent-color); display:block; margin:10px auto 0; border-radius:2px; }
    .card { border:none; border-radius:15px; overflow:hidden; box-shadow:0 6px 20px var(--card-shadow); transition: transform 0.3s, box-shadow 0.3s; cursor:pointer; background-color:#fff; }
    .card:hover { transform: translateY(-8px) scale(1.03); box-shadow:0 15px 30px var(--card-shadow); }
    .card-img-top { object-fit:cover; width:100%; height:250px; transition: transform 0.5s; }
    .card:hover .card-img-top { transform: scale(1.1); }
    footer { background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); padding:40px 0; color:#fff; text-align:center; font-weight:500; }
    footer a { color:#fff; text-decoration:none; margin:0 10px; }
    footer a:hover { text-decoration:underline; color: var(--accent-color); }
    .modal-body { max-height: 400px; overflow-y: auto; }
    .cart-quantity { width:60px; }
    html {
  scroll-behavior: smooth;
}
    /* FOOTER - Dise√±o profesional e-commerce sin espacios blancos */
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      min-height: 100vh;
    }
    footer { 
      background: linear-gradient(90deg, #1f3c5a, #3b5d50) !important;
      color: white !important;
      text-align: center;
      width: 100% !important; 
      margin: 50px 0 0 0 !important; 
      padding: 30px 0 !important;
      box-sizing: border-box !important;
      position: relative !important;
    }
    footer a {
      color: #b67c3a;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
      color: #b67c3a;
    }
  </style>
  <style>
    /* Ocultar modales persistentes cuando el usuario est√° logueado */
    body.user-logged-in .modal:not(.fade),
    body.user-logged-in .modal.show,
    body.user-logged-in .modal-backdrop {
      display: none !important;
      opacity: 0 !important;
      visibility: hidden !important;
    }
    /* Ocultar elementos flotantes de autenticaci√≥n */
    .auth-floating-hidden {
      display: none !important;
    }
    /* Skip Link para accesibilidad - debe estar oculto por defecto */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: #000000;
      color: #ffffff;
      padding: 8px;
      border-radius: 4px;
      text-decoration: none;
      z-index: 9999;
      font-size: 14px;
      font-weight: bold;
      transition: top 0.2s ease;
    }
    .skip-link:focus {
      top: 6px;
      color: #ffffff;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
  <header role="banner">
    <nav id="navbar-container" role="navigation" aria-label="Navegaci√≥n principal"></nav>
  </header>
  <main id="main-content" role="main">
    <section id="inicio" aria-label="Secci√≥n principal - Hero">
      <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="8000" role="region" aria-label="Carrusel de im√°genes">
    <div class="carousel-inner">
      <div class="carousel-item active" style="background-image: url('pages/Copilot_20250904_084500 (1).png'); background-size: contain; background-position: center; background-repeat: no-repeat; min-height: 500px;">
        <div class="carousel-caption">
          <h1>Patagonia Style</h1>
          <p>Dise√±os inspirados en el sur argentino</p>
          <a href="tienda.html" class="btn btn-custom mt-3">Explorar Tienda</a>
        </div>
      </div>
      <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1505765050516-f72dcac9c60e?auto=format&fit=crop&w=1600&q=80'); background-size: contain; background-position: center; background-repeat: no-repeat; min-height: 500px;">
        <div class="carousel-caption">
          <h1>Patagonia Style</h1>
          <p>La naturaleza hecha estilo</p>
          <a href="tienda.html" class="btn btn-custom mt-3">Explorar Tienda</a>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
    </section>
    <section class="container my-5" aria-labelledby="inspiracion-title">
      <h2 id="inspiracion-title" class="section-title">Inspiraci√≥n Patagonia Style</h2>
      <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8">
          <div class="ratio ratio-16x9">
            <iframe src="https://www.youtube.com/embed/zZtDtEbCtXw?start=632" 
                    title="Paisaje Patagonia Argentina" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen 
                    style="border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.15);"
                    aria-label="Video de inspiraci√≥n sobre la Patagonia Argentina"></iframe>
          </div>
        </div>
      </div>
    </section>
    <section class="container my-5" aria-labelledby="servicios-title">
      <h2 id="servicios-title" class="sr-only">Nuestros Servicios</h2>
      <div class="row text-center g-4">
        <article class="col-md-3 col-sm-6">
          <div class="service-item p-4">
            <div class="service-icon mb-3" aria-hidden="true">
              <i class="bi bi-truck" style="font-size: 3rem; color: var(--primary-color);"></i>
            </div>
            <h3 style="color: var(--primary-color); font-weight: 600; margin-bottom: 10px; font-size: 1.1rem;">Medios de env√≠o</h3>
            <p style="color: var(--text-color); font-size: 0.95rem; margin: 0;">Correo Argentino a todo el pa√≠s</p>
          </div>
        </article>
        <article class="col-md-3 col-sm-6">
          <div class="service-item p-4">
            <div class="service-icon mb-3" aria-hidden="true">
              <i class="bi bi-credit-card" style="font-size: 3rem; color: var(--primary-color);"></i>
            </div>
            <h3 style="color: var(--primary-color); font-weight: 600; margin-bottom: 10px; font-size: 1.1rem;">Medios de Pago</h3>
            <p style="color: var(--text-color); font-size: 0.95rem; margin: 0;">Tarjeta, MercadoPago y Transferencia Bancaria</p>
          </div>
        </article>
        <article class="col-md-3 col-sm-6">
          <div class="service-item p-4">
            <div class="service-icon mb-3" aria-hidden="true">
              <i class="bi bi-telephone" style="font-size: 3rem; color: var(--primary-color);"></i>
            </div>
            <h3 style="color: var(--primary-color); font-weight: 600; margin-bottom: 10px; font-size: 1.1rem;">Cont√°ctanos</h3>
            <p style="color: var(--text-color); font-size: 0.95rem; margin: 0;">Por mail para pedidos y consultas</p>
          </div>
        </article>
        <article class="col-md-3 col-sm-6">
          <div class="service-item p-4">
            <div class="service-icon mb-3" aria-hidden="true">
              <i class="bi bi-percent" style="font-size: 3rem; color: var(--accent-color);"></i>
            </div>
            <h3 style="color: var(--accent-color); font-weight: 600; margin-bottom: 10px; font-size: 1.1rem;">10% off</h3>
            <p style="color: var(--text-color); font-size: 0.95rem; margin: 0;">Abonando por transferencia</p>
          </div>
        </article>
      </div>
    </section>
    <section class="container my-5" aria-labelledby="testimonios-title">
      <h2 id="testimonios-title" class="text-center mb-5" style="color: #1f3c5a; font-weight: 600;">Testimonios</h2>
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <article class="testimonial-container" style="background: white; border-radius: 15px; padding: 0; box-shadow: 0 8px 25px rgba(0,0,0,0.1); border: 1px solid #f0f0f0; overflow: hidden;">
            <div class="text-center" style="padding: 50px 30px 30px;">
              <div class="mb-4" aria-hidden="true">
                <i class="bi bi-quote" style="font-size: 3rem; color: #ccc; opacity: 0.5;"></i>
              </div>
              <blockquote class="fs-5 mb-4" style="color: #333; line-height: 1.8; font-style: italic; font-weight: 400; max-width: 600px; margin: 0 auto;">
                "Vivi, tus productos son pura magia. Compr√© una libreta y unos jarros enlozados, y cada vez que los uso, siento que me transportan a la Patagonia. La calidad es incre√≠ble y los detalles ilustrados son hermosos."
              </blockquote>
            </div>
            <div class="mt-4" style="background: linear-gradient(135deg, #1f3c5a, #3b5d50); padding: 20px; text-align: center;">
              <cite style="color: #ffffff !important; font-weight: 700; font-style: normal;">Sofia de Buenos Aires</cite>
            </div>
            </div>
          </article>
        </div>
      </div>
    </section>
  </main>
  <style>
    /* ‚úÖ SOLUCI√ìN FOOTER DEFINITIVA */
    body {
      display: flex !important;
      flex-direction: column !important;
      min-height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    main {
      flex: 1 0 auto !important;
    }
    footer {
      flex-shrink: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }
  </style>
  <style>
    /* ‚úÖ SOLUCI√ìN FOOTER DEFINITIVA Y LIMPIA */
    html, body {
      margin: 0 !important;
      padding: 0 !important;
    }
    body {
      display: flex !important;
      flex-direction: column !important;
      min-height: 100vh !important;
    }
    main {
      flex: 1 0 auto !important;
    }
    footer {
      flex-shrink: 0 !important;
      margin-bottom: 0 !important;
    }
  </style>
  <style>
    /* üö´ ELIMINAR BOT√ìN "CREAR CUENTA" FLOTANTE - SOLUCI√ìN DEFINITIVA */
    /* Ocultar cualquier bot√≥n o enlace con "Crear Cuenta" que NO est√© dentro de un modal */
    body > .auth-button,
    body > .signup-button {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
      position: absolute !important;
      left: -9999px !important;
    }
    /* Ocultar elementos con texto "Crear Cuenta" fuera de modales */
    footer ~ a:not([href*="instagram"]):not([href*="facebook"]),
    footer ~ button {
      display: none !important;
    }
    /* Asegurar que solo WhatsApp sea visible como bot√≥n flotante */
    body > a[href*="wa.me"] {
      display: flex !important;
    }
    /* FORZAR: Eliminar completamente cualquier barra de b√∫squeda */
    input[type="search"], 
    form[role="search"], 
    .search-form, 
    .search-container,
    .search-wrapper,
    .navbar .input-group,
    .navbar input[placeholder*="Buscar"],
    .navbar input[placeholder*="buscar"] {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      width: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    /* üéâ Sistema de Notificaciones Elegantes */
    .notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      max-width: 400px;
    }
    .notification {
      background: white;
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 10px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      border-left: 4px solid;
      display: flex;
      align-items: center;
      transform: translateX(450px);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }
    .notification.success {
      border-left-color: #28a745;
    }
    .notification.info {
      border-left-color: #007bff;
    }
    .notification.warning {
      border-left-color: #ffc107;
    }
    .notification.error {
      border-left-color: #dc3545;
    }
    .notification-icon {
      font-size: 1.2rem;
      margin-right: 12px;
      width: 24px;
      text-align: center;
    }
    .notification.success .notification-icon {
      color: #28a745;
    }
    .notification.info .notification-icon {
      color: #007bff;
    }
    .notification.warning .notification-icon {
      color: #ffc107;
    }
    .notification.error .notification-icon {
      color: #dc3545;
    }
    .notification-content {
      flex: 1;
    }
    .notification-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 0.9rem;
    }
    .notification-message {
      font-size: 0.8rem;
      color: #666;
      margin: 0;
    }
    .notification-close {
      background: none;
      border: none;
      font-size: 1.1rem;
      color: #999;
      cursor: pointer;
      padding: 0;
      margin-left: 10px;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }
    .notification-close:hover {
      background: #f0f0f0;
      color: #333;
    }
    @media (max-width: 768px) {
      .notification-container {
        left: 10px;
        right: 10px;
        top: 10px;
        max-width: none;
      }
      .notification {
        transform: translateY(-100px);
      }
      .notification.show {
        transform: translateY(0);
      }
    }
  </style>
  <div class="modal fade" id="simpleLoginModal" tabindex="-1" aria-labelledby="simpleLoginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 450px;">
      <div class="modal-content" style="border-radius: 15px; border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
        <div class="modal-header" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; border-radius: 15px 15px 0 0;">
          <h5 class="modal-title" id="simpleLoginModalLabel">
            <i class="bi bi-person-circle me-2"></i>Mi Cuenta
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" style="padding: 30px;">
          <ul class="nav nav-pills mb-4 justify-content-center" id="authTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active px-4 py-2" id="login-tab" data-bs-toggle="pill" data-bs-target="#login-pane" type="button" role="tab" style="border-radius: 25px; font-weight: 600;">
                <i class="bi bi-box-arrow-in-right me-1"></i>Iniciar Sesi√≥n
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link px-4 py-2 ms-2" id="register-tab" data-bs-toggle="pill" data-bs-target="#register-pane" type="button" role="tab" style="border-radius: 25px; font-weight: 600;">
                <i class="bi bi-person-plus me-1"></i>Crear Cuenta
              </button>
            </li>
          </ul>
          <div class="tab-content" id="authTabsContent">
            <div class="tab-pane fade show active" id="login-pane" role="tabpanel" aria-labelledby="login-tab">
              <form id="simple-login-form">
                <div class="mb-3">
                  <label for="simple-login-email" class="form-label">
                    <i class="bi bi-envelope me-1"></i>Email
                  </label>
                  <input type="email" class="form-control" id="simple-login-email" required>
                </div>
                <div class="mb-3">
                  <label for="simple-login-password" class="form-label">
                    <i class="bi bi-lock me-1"></i>Contrase√±a
                  </label>
                  <input type="password" class="form-control" id="simple-login-password" required>
                </div>
                <div class="form-check mb-3">
                  <input class="form-check-input" type="checkbox" id="simple-remember-me">
                  <label class="form-check-label" for="simple-remember-me">
                    Recordarme
                  </label>
                </div>
                <button type="submit" class="btn btn-primary w-100 mb-3" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); border: none; padding: 12px; border-radius: 8px;">
                  <i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesi√≥n
                </button>
              </form>
            </div>
            <div class="tab-pane fade" id="register-pane" role="tabpanel" aria-labelledby="register-tab">
              <form id="simple-register-form">
                <div class="mb-3">
                  <label for="register-name" class="form-label">
                    <i class="bi bi-person me-1"></i>Nombre Completo
                  </label>
                  <input type="text" class="form-control" id="register-name" required>
                </div>
                <div class="mb-3">
                  <label for="register-email" class="form-label">
                    <i class="bi bi-envelope me-1"></i>Email
                  </label>
                  <input type="email" class="form-control" id="register-email" required>
                </div>
                <div class="mb-3">
                  <label for="register-password" class="form-label">
                    <i class="bi bi-lock me-1"></i>Contrase√±a
                  </label>
                  <input type="password" class="form-control" id="register-password" required>
                </div>
                <div class="mb-3">
                  <label for="register-confirm-password" class="form-label">
                    <i class="bi bi-lock-fill me-1"></i>Confirmar Contrase√±a
                  </label>
                  <input type="password" class="form-control" id="register-confirm-password" required>
                </div>
                <div class="form-check mb-3">
                  <input class="form-check-input" type="checkbox" id="accept-terms" required>
                  <label class="form-check-label" for="accept-terms">
                    Acepto los <a href="#" style="color: var(--primary-color);">t√©rminos y condiciones</a>
                  </label>
                </div>
                <button type="submit" class="btn btn-success w-100 mb-3" style="background: linear-gradient(135deg, #28a745, #20c997); border: none; padding: 12px; border-radius: 8px;">
                  <i class="bi bi-person-plus me-2"></i>Crear Cuenta
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="notification-container" class="notification-container"></div>
  <div class="modal fade" id="welcomeModal" tabindex="-1" aria-labelledby="welcomeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius: 15px; border: none; box-shadow: 0 15px 35px rgba(0,0,0,0.1);">
        <div class="modal-header" style="background: linear-gradient(135deg, #00b894, #55efc4); color: white; border-radius: 15px 15px 0 0;">
          <h5 class="modal-title" id="welcomeModalLabel">
            <i class="bi bi-check-circle me-2"></i>¬°Bienvenido a Patagonia Style!
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center" style="padding: 30px;">
          <div class="mb-4">
            <i class="bi bi-emoji-smile" style="font-size: 4rem; color: var(--accent-color);"></i>
          </div>
          <h4>¬°Tu cuenta ha sido creada exitosamente!</h4>
          <p class="text-muted mb-4">Ya puedes disfrutar de todos los beneficios de ser parte de nuestra comunidad.</p>
          <div class="row text-center">
            <div class="col-4">
              <i class="bi bi-box-seam" style="font-size: 2rem; color: var(--primary-color);"></i>
              <p class="small mt-2">Historial de pedidos</p>
            </div>
            <div class="col-4">
              <i class="bi bi-geo-alt" style="font-size: 2rem; color: var(--primary-color);"></i>
              <p class="small mt-2">Direcciones guardadas</p>
            </div>
            <div class="col-4">
              <i class="bi bi-star" style="font-size: 2rem; color: var(--primary-color);"></i>
              <p class="small mt-2">Califica productos</p>
            </div>
          </div>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="window.location.href='tienda.html'">
            <i class="bi bi-shop me-2"></i>Explorar Tienda
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content" style="border-radius: 12px; border: none; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
        <div class="modal-header" style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; border-radius: 12px 12px 0 0; padding: 12px 16px;">
          <h6 class="modal-title" id="logoutModalLabel" style="font-size: 0.95rem; margin: 0;">
            <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesi√≥n
          </h6>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="font-size: 0.8rem;"></button>
        </div>
        <div class="modal-body text-center" style="padding: 20px;">
          <i class="bi bi-question-circle" style="font-size: 3rem; color: #e74c3c; margin-bottom: 15px;"></i>
          <h6 style="margin-bottom: 10px;">¬øEst√°s seguro?</h6>
          <p style="font-size: 0.9rem; color: #666; margin-bottom: 20px;">Se cerrar√° tu sesi√≥n actual</p>
          <div class="d-flex gap-2">
            <button type="button" class="btn btn-secondary btn-sm flex-fill" data-bs-dismiss="modal">
              Cancelar
            </button>
            <button type="button" class="btn btn-danger btn-sm flex-fill" onclick="logoutUser()" data-bs-dismiss="modal">
              Cerrar Sesi√≥n
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/utils/logger.js"></script>
  <script src="js/utils/validators.js"></script>
  <script src="js/utils/helpers.js"></script>
  <script src="js/utils/improvements.js"></script>
  <script src="js/utils/test-runner.js"></script>
  <script src="js/utils/product-card-builder.js"></script>
  <script src="js/utils/product-renderer.js"></script>
  <script src="js/store.js"></script>
  <script src="js/users.js"></script>
  <script src="js/debug-auth.js"></script>
  <script src="js/tests/store-tests.js"></script>
  <script>
    // Observer para detectar y eliminar elementos problem√°ticos inmediatamente
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        mutation.addedNodes.forEach((node) => {
          if (node.nodeType === 1) { // Elemento HTML
            // Verificar si el elemento agregado contiene texto problem√°tico
            if (node.textContent && 
                (node.textContent.includes('Crear Cuenta') || 
                 node.textContent.includes('¬øYa tienes cuenta?')) &&
                !node.closest('.modal')) {
              console.log('üö´ Observer: Eliminando elemento reci√©n agregado:', node);
              if (node.parentNode) {
                node.parentNode.removeChild(node);
              }
            }
            // Verificar elementos hijos tambi√©n
            const elementosProblematicos = node.querySelectorAll('*');
            elementosProblematicos.forEach(el => {
              if (el.textContent && 
                  (el.textContent.includes('Crear Cuenta') || 
                   el.textContent.includes('¬øYa tienes cuenta?')) &&
                  !el.closest('.modal')) {
                console.log('üö´ Observer: Eliminando elemento hijo problem√°tico:', el);
                if (el.parentNode) {
                  el.parentNode.removeChild(el);
                }
              }
            });
          }
        });
      });
    });
    // Iniciar observaci√≥n cuando se carga la p√°gina
    document.addEventListener('DOMContentLoaded', function() {
      // Observar cambios en todo el document
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
      console.log('üõ°Ô∏è Observer de limpieza activado');
    });
    // Funci√≥n para buscar productos
    function buscarProductos(event) {
      event.preventDefault();
      const searchTerm = document.getElementById('navbar-search').value.trim();
      if (searchTerm) {
        window.location.href = `tienda.html?search=${encodeURIComponent(searchTerm)}`;
      }
      return false;
    }
    // Funci√≥n para actualizar el navbar seg√∫n el estado del usuario
    function actualizarNavbarUsuario() {
      // Si tenemos el navbar universal, usarlo
      if (typeof universalNavbar !== 'undefined') {
        universalNavbar.loadCurrentUser();
        universalNavbar.renderNavbar();
        return;
      }
      // Fallback para el navbar original
      const currentUser = JSON.parse(localStorage.getItem('currentUser')) || 
                          JSON.parse(localStorage.getItem('patagonia_user'));
      const navbarActions = document.getElementById('navbarActions');
      if (currentUser && navbarActions) {
        // Usuario logueado - mostrar men√∫ desplegable m√°s visible
        navbarActions.innerHTML = `
          <div class="dropdown">
            <button class="btn btn-outline-light dropdown-toggle" type="button" 
                    data-bs-toggle="dropdown" aria-expanded="false"
                    style="border: 2px solid rgba(255,255,255,0.5); background: rgba(255,255,255,0.1); 
                           border-radius: 20px; padding: 6px 12px; font-weight: 500; font-size: 0.9rem;">
              <i class="bi bi-person-circle me-1" style="font-size: 1rem;"></i>
              ${currentUser.firstName || currentUser.name || currentUser.email.split('@')[0]}
            </button>
            <ul class="dropdown-menu dropdown-menu-end" 
                style="border: 1px solid #ddd; border-radius: 10px; padding: 8px 0; margin-top: 5px; 
                       box-shadow: 0 5px 15px rgba(0,0,0,0.2); min-width: 200px; background: white;">
              <li style="padding: 8px 15px; border-bottom: 1px solid #eee;">
                <div style="color: #666; font-size: 0.8rem;">Logueado como:</div>
                <div style="color: #333; font-weight: bold; font-size: 0.9rem;">${currentUser.firstName || currentUser.name || 'Usuario'}</div>
              </li>
              <li>
                <a href="mi-cuenta.html" 
                   style="display: block; padding: 10px 15px; color: #333 !important; text-decoration: none; 
                          font-size: 0.9rem; font-weight: 500; border: none; background: none;">
                  <i class="bi bi-person me-2"></i>Mi cuenta
                </a>
              </li>
              <li>
                <a href="mis-pedidos.html" 
                   style="display: block; padding: 10px 15px; color: #333 !important; text-decoration: none; 
                          font-size: 0.9rem; font-weight: 500; border: none; background: none;">
                  <i class="bi bi-box me-2"></i>Mis pedidos
                </a>
              </li>
              <li><hr class="dropdown-divider" style="margin: 5px 0;"></li>
              <li>
                <button onclick="logoutUser(); return false;" 
                   style="display: block; width: 100%; padding: 10px 15px; color: #dc3545 !important; text-decoration: none; 
                          font-size: 0.9rem; font-weight: 500; border: none; background: none; text-align: left;">
                  <i class="bi bi-box-arrow-right me-2"></i>Cerrar sesi√≥n
                </button>
              </li>
            </ul>
          </div>
        `;
      } else if (navbarActions) {
        // Usuario no logueado
        navbarActions.innerHTML = `
          <button type="button" class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#loginModal"
                  style="border: 1px solid rgba(255,255,255,0.4); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">
            <i class="bi bi-person" style="margin-right: 4px;"></i>Entrar
          </button>
        `;
      }
    }
    // Funci√≥n para cerrar sesi√≥n compatible con ambos sistemas
    function cerrarSesion() {
      logoutUser();
    }
    // Funci√≥n para ocultar elementos de autenticaci√≥n si el usuario est√° logueado
    function ocultarElementosAuth() {
      const currentUser = getCurrentUser();
      if (currentUser) {
        // Agregar clase al body para CSS
        document.body.classList.add('user-logged-in');
        // Cerrar cualquier modal de login/registro que pueda estar abierto
        const modales = ['loginModal', 'registerModal', 'welcomeModal', 'logoutModal'];
        modales.forEach(modalId => {
          const modal = document.getElementById(modalId);
          if (modal) {
            const bootstrapModal = bootstrap.Modal.getInstance(modal);
            if (bootstrapModal) {
              bootstrapModal.hide();
            }
            // Tambi√©n forzar ocultaci√≥n
            modal.style.display = 'none';
            modal.classList.remove('show');
          }
        });
        // Remover cualquier backdrop de modal
        const backdrops = document.querySelectorAll('.modal-backdrop');
        backdrops.forEach(backdrop => backdrop.remove());
        // Remover clase modal-open del body
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
        // ELIMINAR COMPLETAMENTE cualquier elemento "Crear Cuenta" fuera de modales
        function eliminarElementosAuth() {
          const textosProblematicos = ['Crear Cuenta', '¬øYa tienes cuenta?', 'Registrarse', 'Reg√≠strate'];
          textosProblematicos.forEach(texto => {
            // Buscar todos los elementos
            const todosLosElementos = document.querySelectorAll('*');
            todosLosElementos.forEach(element => {
              // Si el elemento contiene el texto problem√°tico
              if (element.textContent && 
                  (element.textContent.trim() === texto || 
                   element.textContent.includes(texto)) &&
                  // Y NO est√° dentro de un modal
                  !element.closest('.modal') && 
                  // Y NO es un script
                  element.tagName !== 'SCRIPT' &&
                  // Y es visible
                  element.offsetParent !== null) {
                console.log('üóëÔ∏è Eliminando elemento problem√°tico:', texto, element);
                // Eliminar completamente del DOM
                if (element.parentNode) {
                  element.parentNode.removeChild(element);
                }
              }
            });
          });
          // Buscar botones espec√≠ficos con clases o ids problem√°ticos
          const selectoresProblematicos = [
            '.btn-signup',
            '.signup-btn'
          ];
          selectoresProblematicos.forEach(selector => {
            try {
              const elementos = document.querySelectorAll(selector);
              elementos.forEach(el => {
                if (!el.closest('.modal')) {
                  console.log('üóëÔ∏è Eliminando bot√≥n problem√°tico:', el);
                  if (el.parentNode) {
                    el.parentNode.removeChild(el);
                  }
                }
              });
            } catch (e) {
              // Selector no v√°lido, continuar
            }
          });
        }
        // Ejecutar limpieza inmediata
        eliminarElementosAuth();
        // ELIMINAR DIRECTAMENTE cualquier elemento que contenga "Crear Cuenta" fuera de modales
        const crearCuentaElements = document.querySelectorAll('*');
        crearCuentaElements.forEach(element => {
          if (element.textContent && element.textContent.includes('Crear Cuenta') && 
              !element.closest('.modal') && 
              element.tagName !== 'SCRIPT' &&
              element.offsetParent !== null) { // Solo elementos visibles
            console.log('Eliminando elemento con "Crear Cuenta":', element);
            element.style.display = 'none !important';
            element.remove(); // Eliminar completamente del DOM
          }
        });
        // ELIMINAR DIRECTAMENTE cualquier elemento que contenga "¬øYa tienes cuenta?"
        const yaTienesCuentaElements = document.querySelectorAll('*');
        yaTienesCuentaElements.forEach(element => {
          if (element.textContent && element.textContent.includes('¬øYa tienes cuenta?') && 
              !element.closest('.modal') && 
              element.tagName !== 'SCRIPT' &&
              element.offsetParent !== null) {
            console.log('Eliminando elemento con "¬øYa tienes cuenta?":', element);
            element.style.display = 'none !important';
            element.remove();
          }
        });
        // ELIMINAR DIRECTAMENTE cualquier elemento que contenga "Iniciar Sesi√≥n" y no est√© en navbar
        const iniciarSesionElements = document.querySelectorAll('*');
        iniciarSesionElements.forEach(element => {
          if (element.textContent && element.textContent.includes('Iniciar Sesi√≥n') && 
              !element.closest('.modal') && 
              !element.closest('nav') &&
              !element.closest('#navbar-container') &&
              element.tagName !== 'SCRIPT' &&
              element.offsetParent !== null) {
            console.log('Eliminando elemento con "Iniciar Sesi√≥n":', element);
            element.style.display = 'none !important';
            element.remove();
          }
        });
        console.log('Elementos de autenticaci√≥n eliminados');
      } else {
        // Usuario no logueado, remover clase
        document.body.classList.remove('user-logged-in');
      }
    }
    // Funci√≥n para obtener usuario actual
    function getCurrentUser() {
      try {
        return JSON.parse(localStorage.getItem('currentUser')) || 
               JSON.parse(localStorage.getItem('patagonia_user'));
      } catch (error) {
        return null;
      }
    }
    // Observer para eliminar elementos de autenticaci√≥n que aparezcan din√°micamente
    function setupAuthElementsObserver() {
      const currentUser = getCurrentUser();
      if (!currentUser) return;
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          mutation.addedNodes.forEach((node) => {
            if (node.nodeType === Node.ELEMENT_NODE) {
              // Verificar si el nodo o sus hijos contienen texto de autenticaci√≥n
              const authTexts = ['Crear Cuenta', '¬øYa tienes cuenta?'];
              authTexts.forEach(text => {
                if (node.textContent && node.textContent.includes(text) && 
                    !node.closest('.modal') && 
                    !node.closest('nav') &&
                    node.tagName !== 'SCRIPT') {
                  console.log('Observer: Eliminando elemento din√°mico con:', text);
                  node.remove();
                }
              });
            }
          });
        });
      });
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
      return observer;
    }
    // Inicializaci√≥n de la p√°gina principal
    document.addEventListener('DOMContentLoaded', () => {
      // Actualizar navbar seg√∫n estado del usuario
      actualizarNavbarUsuario();
      // Ocultar elementos de autenticaci√≥n si el usuario est√° logueado
      setTimeout(() => {
        ocultarElementosAuth();
      }, 500);
      // Configurar observer para elementos din√°micos
      setTimeout(() => {
        setupAuthElementsObserver();
      }, 1000);
      // Actualizar contadores despu√©s de un momento
      setTimeout(() => {
        if (typeof store !== 'undefined') {
          store.actualizarContadorCarrito();
        }
        actualizarCarrito();
      }, 100);
      // Event listeners para los formularios de login y registro
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      if (loginForm) {
        loginForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          const email = document.getElementById('login-email').value;
          const password = document.getElementById('login-password').value;
          // Usar el sistema de usuarios oficial
          if (typeof userManager !== 'undefined') {
            const result = await userManager.login(email, password);
            if (result.success) {
              // Cerrar modal
              const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
              modal.hide();
              // Disparar evento para actualizar navbar
              const event = new CustomEvent('userLoggedIn', {
                detail: result.user
              });
              document.dispatchEvent(event);
              // Actualizar navbar
              if (typeof universalNavbar !== 'undefined') {
                universalNavbar.currentUser = result.user;
                universalNavbar.renderNavbar();
              }
            }
          } else {
            // Fallback si userManager no est√° disponible
            const userData = {
              email: email,
              firstName: email.split('@')[0],
              id: Date.now()
            };
            localStorage.setItem('currentUser', JSON.stringify(userData));
            localStorage.setItem('patagonia_user', JSON.stringify(userData));
            // Cerrar modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            modal.hide();
            // Disparar evento
            const event = new CustomEvent('userLoggedIn', {
              detail: userData
            });
            document.dispatchEvent(event);
            alert('¬°Bienvenido de vuelta!');
          }
        });
      }
      if (registerForm) {
        registerForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          const name = document.getElementById('register-name').value;
          const email = document.getElementById('register-email').value;
          const password = document.getElementById('register-password').value;
          const confirmPassword = document.getElementById('register-confirm-password').value;
          // Validar contrase√±as
          if (password !== confirmPassword) {
            console.log('Error: Contrase√±as no coinciden');
            // Mostrar error directo en lugar de notificaci√≥n
            alert('Las contrase√±as no coinciden');
            return;
          }
          // Separar nombre en firstName y lastName
          const nameParts = name.trim().split(' ');
          const firstName = nameParts[0] || '';
          const lastName = nameParts.slice(1).join(' ') || 'Usuario';
          const userData = {
            firstName: firstName,
            lastName: lastName,
            email: email,
            password: password,
            phone: '1234567890' // Tel√©fono v√°lido por defecto
          };
          console.log('Intentando registrar usuario:', { ...userData, password: '[OCULTA]' });
          // Usar el sistema de usuarios oficial
          if (typeof userManager !== 'undefined') {
            try {
              const result = await userManager.register(userData);
              console.log('Resultado del registro:', result);
              if (result.success) {
                // Ya no hay modal de registro
                // Disparar evento para actualizar navbar
                const event = new CustomEvent('userLoggedIn', {
                  detail: result.user
                });
                document.dispatchEvent(event);
                // Actualizar navbar
                if (typeof universalNavbar !== 'undefined') {
                  universalNavbar.currentUser = result.user;
                  universalNavbar.renderNavbar();
                }
                // Mostrar modal de bienvenida
                setTimeout(() => {
                  const welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
                  welcomeModal.show();
                }, 500);
              } else {
                console.error('Error en registro:', result.error);
                alert('Error al registrar: ' + result.error);
              }
            } catch (error) {
              console.error('Error durante registro:', error);
              alert('Error durante el registro: ' + error.message);
            }
          } else {
            // Fallback si userManager no est√° disponible
            const userDataFallback = {
              email: email,
              firstName: firstName,
              lastName: lastName,
              id: Date.now()
            };
            localStorage.setItem('currentUser', JSON.stringify(userDataFallback));
            localStorage.setItem('patagonia_user', JSON.stringify(userDataFallback));
            // Ya no hay modal de registro
            // Disparar evento
            const event = new CustomEvent('userLoggedIn', {
              detail: userDataFallback
            });
            document.dispatchEvent(event);
            // Mostrar modal de bienvenida
            setTimeout(() => {
              const welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
              welcomeModal.show();
            }, 500);
          }
        });
      }
    });
    // Agregar funcionalidad de b√∫squeda en navbar
    document.addEventListener('submit', function(e) {
      if (e.target.matches('form[role="search"]')) {
        e.preventDefault();
        const searchTerm = e.target.querySelector('input[type="search"]').value;
        if (searchTerm.trim()) {
          // Redirigir a tienda con par√°metro de b√∫squeda
          window.location.href = `tienda.html?search=${encodeURIComponent(searchTerm)}`;
        }
      }
    });
    // üõ°Ô∏è C√ìDIGO DE CARRITO PROTEGIDO (NO GENERA ERRORES)
    try {
      // Funciones legacy mantenidas para compatibilidad
      const products = [
        {name:"Jarrito Esmaltado", price:15, img:"https://images.unsplash.com/photo-1570129477492-45c003edd2be?auto=format&fit=crop&w=800&q=80"},
        {name:"Cuaderno", price:12, img:"https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=800&q=80"},
        {name:"Stickers", price:5, img:"https://images.unsplash.com/photo-1600783245996-2e8a09852ffb?auto=format&fit=crop&w=800&q=80"}
      ];
      const productsContainer = document.getElementById('products');
      const cartItemsEl = document.getElementById('cartItems');
      const cartTotalEl = document.getElementById('cartTotal');
      const cartCountEl = document.getElementById('cartCount');
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      function renderProducts() {
        if (!productsContainer) return;
        productsContainer.innerHTML = '';
        products.forEach((p, i) => {
          productsContainer.innerHTML += `
            <div class="col-md-4">
              <div class="card" data-index="${i}">
                <img src="${p.img}" class="card-img-top" alt="${p.name}">
                <div class="card-body text-center">
                  <h5 class="card-title">${p.name}</h5>
                  <p class="card-text">$${p.price}</p>
                  <button class="btn btn-custom w-100 add-to-cart">Agregar al carrito</button>
                </div>
              </div>
            </div>`;
        });
      }
      function updateCart() {
        if (!cartItemsEl) return;
        cartItemsEl.innerHTML = '';
        let total = 0;
        cart.forEach((item, index) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;
          cartItemsEl.innerHTML += `
            <tr>
              <td>${item.name}</td>
              <td>$${item.price}</td>
              <td><input type="number" min="1" value="${item.quantity}" class="form-control cart-quantity" onchange="changeQuantity(${index}, this.value)"></td>
              <td>$${itemTotal}</td>
              <td><button class="btn btn-sm btn-danger" onclick="removeFromCart(${index})">Eliminar</button></td>
            </tr>`;
        });
        if (cartTotalEl) cartTotalEl.textContent = total;
        if (cartCountEl) cartCountEl.textContent = cart.reduce((sum, i) => sum + i.quantity,0);
        localStorage.setItem('cart', JSON.stringify(cart));
      }
      function addToCart(index) {
        const product = products[index];
        const existing = cart.find(i => i.name === product.name);
        if(existing) existing.quantity++;
        else cart.push({...product, quantity:1});
        updateCart();
      }
      function removeFromCart(index){ cart.splice(index,1); updateCart(); }
      function changeQuantity(index, value){ cart[index].quantity = parseInt(value)||1; updateCart(); }
      // Inicializaci√≥n solo si existen los elementos
      if (productsContainer) {
        renderProducts();
        updateCart();
        document.querySelectorAll('.add-to-cart').forEach((btn,i) => btn.addEventListener('click', () => addToCart(i)));
      }
      if (document.getElementById('checkoutBtn')) {
        document.getElementById('checkoutBtn').addEventListener('click', () => {
          if(cart.length===0) {
            alert('El carrito est√° vac√≠o.');
          } else {
            const total = cart.reduce((s,i)=>s+i.price*i.quantity,0);
            // Crear mensaje detallado para WhatsApp
            let mensaje = "¬°Hola! Quiero confirmar mi pedido:%0A%0A";
            cart.forEach(item => {
              mensaje += `‚Ä¢ ${item.name} (x${item.quantity}) - $${item.price * item.quantity}%0A`;
            });
            mensaje += `%0A*Total: $${total}*%0A%0A`;
            mensaje += "¬°Esperando la confirmaci√≥n! üòä";
            // Limpiar carrito
            cart = [];
            updateCart();
            // Cerrar modal
            const modal = document.getElementById('cartModal');
            if (modal) {
              bootstrap.Modal.getInstance(modal).hide();
            }
            // Redirigir a WhatsApp despu√©s de un breve delay
            setTimeout(() => {
              window.open(`https://wa.me/5491136899678?text=${mensaje}`, '_blank');
            }, 500);
          }
        });
      }
    } catch (error) {
      console.log('üîá Sistema de carrito en modo silencioso:', error.message);
      // No mostrar errores al usuario, solo continuar sin carrito
    }
    function actualizarCarrito() {
      if (typeof store !== 'undefined') {
        store.actualizarContadorCarrito();
      } else {
        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        let total = carrito.reduce((acc, prod) => acc + prod.cantidad, 0);
        let badge = document.getElementById('cart-count');
        if (badge) {
          badge.textContent = total;
          badge.style.display = total > 0 ? 'inline-block' : 'none';
        }
      }
    }
    // Floating Label Professional Implementation
    class FloatingLabel {
      constructor() {
        this.init();
      }
      init() {
        this.setupEventListeners();
        this.checkInitialValues();
      }
      setupEventListeners() {
        // Usar event delegation para manejar modales din√°micos
        document.addEventListener('focus', (e) => {
          if (e.target.classList.contains('form-control-custom')) {
            this.handleFocus(e.target);
          }
        }, true);
        document.addEventListener('blur', (e) => {
          if (e.target.classList.contains('form-control-custom')) {
            this.handleBlur(e.target);
          }
        }, true);
        document.addEventListener('input', (e) => {
          if (e.target.classList.contains('form-control-custom')) {
            this.handleInput(e.target);
          }
        });
        // Reinicializar cuando se abran los modales
        document.addEventListener('shown.bs.modal', () => {
          this.checkInitialValues();
        });
      }
      handleFocus(input) {
        input.classList.add('focused');
        this.updateLabel(input);
      }
      handleBlur(input) {
        input.classList.remove('focused');
        this.updateLabel(input);
      }
      handleInput(input) {
        this.updateLabel(input);
      }
      updateLabel(input) {
        const hasValue = input.value.trim() !== '';
        if (hasValue) {
          input.classList.add('has-value');
        } else {
          input.classList.remove('has-value');
        }
      }
      checkInitialValues() {
        const inputs = document.querySelectorAll('.form-control-custom');
        inputs.forEach(input => {
          this.updateLabel(input);
        });
      }
    }
    // Inicializar Floating Labels
    let floatingLabelManager;
    document.addEventListener('DOMContentLoaded', function() {
      floatingLabelManager = new FloatingLabel();
    });
    // Escuchar eventos de login/logout para ocultar elementos de auth
    document.addEventListener('userLoggedIn', () => {
      setTimeout(() => {
        ocultarElementosAuth();
        setupAuthElementsObserver();
      }, 500);
    });
    // Listener √∫nico para logout events - remover listeners duplicados primero
    document.removeEventListener('userLoggedOut', handleLogout);
    document.addEventListener('userLoggedOut', handleLogout);
    function handleLogout(event) {
      // Cuando se cierra sesi√≥n, los elementos de auth deber√≠an ser visibles de nuevo
      document.body.classList.remove('user-logged-in');
      // Mostrar notificaci√≥n solo si viene del evento y no se ha mostrado ya
      if (event.detail && event.detail.showNotification && event.detail.userName) {
        // Peque√±o delay para asegurar que solo se muestre una vez
        setTimeout(() => {
          showLogoutNotification(event.detail.userName);
        }, 100);
      }
    }
    // Funci√≥n para limpiar elementos persistentes cada 2 segundos
    setInterval(() => {
      const currentUser = getCurrentUser();
      if (currentUser) {
        // Buscar y eliminar elementos problem√°ticos que puedan haber aparecido
        const problematicTexts = ['Crear Cuenta', '¬øYa tienes cuenta?', 'Registrarse', 'Reg√≠strate'];
        problematicTexts.forEach(text => {
          const elements = document.querySelectorAll('*');
          elements.forEach(element => {
            if (element.textContent && 
                (element.textContent.trim() === text || element.textContent.includes(text)) && 
                !element.closest('.modal') && 
                !element.closest('script') &&
                element.tagName !== 'SCRIPT' &&
                element.offsetParent !== null) {
              console.log('üßπ Limpieza peri√≥dica: eliminando', text, element);
              if (element.parentNode) {
                element.parentNode.removeChild(element);
              }
            }
          });
        });
        // Eliminar botones espec√≠ficos que puedan haber aparecido
        const buttonsToRemove = document.querySelectorAll('button, a');
        buttonsToRemove.forEach(btn => {
          if ((btn.textContent.includes('Crear Cuenta') || 
               btn.textContent.includes('Registrarse')) &&
              !btn.closest('.modal')) {
            console.log('üßπ Eliminando bot√≥n persistente:', btn);
            if (btn.parentNode) {
              btn.parentNode.removeChild(btn);
            }
          }
        });
      }
    }, 2000); // Cada 2 segundos
  </script>
<script src="js/error-protection.js"></script>
<script src="js/simple-whatsapp.js"></script>
<script src="js/whatsapp-checkout.js"></script>
<script src="js/universal-navbar.js?v=nosearch2"></script>
<script src="js/frontend-utils.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Inicializar el navbar universal SIN b√∫squeda
    new UniversalNavbar('navbar-container', {
      showSearch: false
    });
    // FORZAR eliminaci√≥n de b√∫squeda por si acaso
    setTimeout(() => {
      // Eliminar cualquier elemento de b√∫squeda que pueda aparecer
      document.querySelectorAll('input[type="search"], form[role="search"], .search-form, .navbar .input-group').forEach(el => {
        el.style.display = 'none';
        el.remove();
      });
      // Eliminar cualquier contenedor de b√∫squeda
      document.querySelectorAll('.search-container, .search-wrapper').forEach(el => {
        el.style.display = 'none';
        el.remove();
      });
    }, 100);
    // Funci√≥n para ocultar "Crear Cuenta" sin romper funcionalidad
    function ocultarCrearCuentaSinRomper() {
      const elementos = document.querySelectorAll('button, a');
      elementos.forEach(el => {
        if (el.textContent && el.textContent.trim() === 'Crear Cuenta') {
          const estaEnModal = el.closest('.modal') !== null;
          const estaEnNavbar = el.closest('.navbar, #navbar-container') !== null;
          if (!estaEnModal && estaEnNavbar) {
            el.style.display = 'none';
          }
        }
      });
    }
    // Ejecutar despu√©s de que el navbar se cargue
    setTimeout(ocultarCrearCuentaSinRomper, 2000);
  });
</script>
<script src="js/universal-modals.js"></script>
<script>
// Funciones para mostrar notificaciones elegantes
function showNotification(type, title, message, duration = 4000) {
  const container = document.getElementById('notification-container');
  if (!container) return;
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  // Iconos seg√∫n el tipo
  const icons = {
    success: 'bi-check-circle-fill',
    error: 'bi-x-circle-fill', 
    warning: 'bi-exclamation-triangle-fill',
    info: 'bi-info-circle-fill'
  };
  notification.innerHTML = `
    <div class="notification-icon">
      <i class="bi ${icons[type]}"></i>
    </div>
    <div class="notification-content">
      <div class="notification-title">${title}</div>
      <div class="notification-message">${message}</div>
    </div>
    <button class="notification-close" onclick="closeNotification(this)">
      <i class="bi bi-x"></i>
    </button>
  `;
  container.appendChild(notification);
  // Mostrar con animaci√≥n
  setTimeout(() => {
    notification.classList.add('show');
  }, 10);
  // Auto-cerrar despu√©s del tiempo especificado
  setTimeout(() => {
    closeNotification(notification.querySelector('.notification-close'));
  }, duration);
}
function closeNotification(button) {
  const notification = button.closest('.notification');
  notification.classList.remove('show');
  setTimeout(() => {
    if (notification.parentNode) {
      notification.parentNode.removeChild(notification);
    }
  }, 400);
}
// Funciones espec√≠ficas para diferentes tipos de notificaciones
function showWelcomeNotification(userName) {
  showNotification('success', '¬°Bienvenido!', `Hola ${userName}, has iniciado sesi√≥n correctamente`, 5000);
}
// Variables de control para notificaciones
let lastLogoutTime = 0;
function showLogoutNotification(userName = null) {
  // Evitar m√∫ltiples notificaciones de logout en un per√≠odo corto
  const now = Date.now();
  if (now - lastLogoutTime < 3000) { // 3 segundos de cooldown
    console.log('Notificaci√≥n de logout bloqueada (muy reciente)');
    return;
  }
  lastLogoutTime = now;
  const message = userName ? 
    `¬°Hasta pronto ${userName}! Has cerrado sesi√≥n exitosamente` : 
    'Has cerrado sesi√≥n exitosamente. ¬°Hasta pronto!';
  showNotification('info', 'Sesi√≥n cerrada', message, 4000);
}
function showRegistrationNotification(userName) {
  showNotification('success', '¬°Cuenta creada!', `Bienvenido ${userName}, tu cuenta ha sido creada exitosamente`, 5000);
}
function showErrorNotification(message) {
  showNotification('error', 'Error', message, 5000);
}
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Interceptar clics en iconos de usuario para mostrar modal
  document.addEventListener('click', function(e) {
    if (e.target.closest('.bi-person-circle') || 
        e.target.closest('[data-bs-target="#loginModal"]') ||
        (e.target.textContent && e.target.textContent.includes('Entrar'))) {
      e.preventDefault();
      const simpleModal = new bootstrap.Modal(document.getElementById('simpleLoginModal'));
      simpleModal.show();
    }
    // Manejar cerrar sesi√≥n
    if (e.target.textContent && (e.target.textContent.includes('Cerrar Sesi√≥n') || e.target.textContent.includes('Cerrar sesi√≥n'))) {
      e.preventDefault();
      // Usar la funci√≥n logoutUser global si est√° disponible
      if (typeof logoutUser !== 'undefined') {
        logoutUser();
      } else {
        // Fallback m√≠nimo sin notificaci√≥n (logoutUser ya la maneja)
        localStorage.removeItem('currentUser');
        localStorage.removeItem('patagonia_user');
        setTimeout(() => {
          window.location.reload();
        }, 500);
      }
    }
  });
  // Manejar submit del formulario de LOGIN
  document.getElementById('simple-login-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('simple-login-email').value;
    const password = document.getElementById('simple-login-password').value;
    if (email && password) {
      // Simular login exitoso
      loginUser(email, email.split('@')[0]);
    }
  });
  // Manejar submit del formulario de REGISTRO
  document.getElementById('simple-register-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('register-name').value;
    const email = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;
    const confirmPassword = document.getElementById('register-confirm-password').value;
    const terms = document.getElementById('accept-terms').checked;
    // Validaciones
    if (password !== confirmPassword) {
      showErrorNotification('Las contrase√±as no coinciden');
      return;
    }
    if (password.length < 6) {
      showErrorNotification('La contrase√±a debe tener al menos 6 caracteres');
      return;
    }
    if (!terms) {
      showErrorNotification('Debes aceptar los t√©rminos y condiciones');
      return;
    }
    if (name && email && password) {
      // Simular registro exitoso
      registerUser(email, name);
    }
  });
  // Funci√≥n para iniciar sesi√≥n
  function loginUser(email, name) {
    // Cerrar modal
    bootstrap.Modal.getInstance(document.getElementById('simpleLoginModal')).hide();
    // Simular usuario logueado
    localStorage.setItem('currentUser', JSON.stringify({
      email: email,
      nombre: name,
      loggedIn: true,
      canReview: true // Puede escribir rese√±as
    }));
    // Actualizar navbar
    setTimeout(() => {
      if (window.universalNavbar && window.universalNavbar.actualizarIconoUsuario) {
        window.universalNavbar.actualizarIconoUsuario();
      }
      showWelcomeNotification(name);
      setTimeout(() => {
        window.location.reload();
      }, 2000); // Dar tiempo para ver la notificaci√≥n
    }, 500);
  }
  // Funci√≥n para registrar usuario
  function registerUser(email, name) {
    // Cerrar modal
    bootstrap.Modal.getInstance(document.getElementById('simpleLoginModal')).hide();
    // Simular usuario registrado y logueado
    localStorage.setItem('currentUser', JSON.stringify({
      email: email,
      nombre: name,
      loggedIn: true,
      canReview: true,
      isNew: true // Usuario reci√©n registrado
    }));
    // Actualizar navbar
    setTimeout(() => {
      if (window.universalNavbar && window.universalNavbar.actualizarIconoUsuario) {
        window.universalNavbar.actualizarIconoUsuario();
      }
      showRegistrationNotification(name);
      setTimeout(() => {
        window.location.reload();
      }, 2000); // Dar tiempo para ver la notificaci√≥n
    }, 500);
  }
});
</script>
<div id="whatsapp-unico"></div>
  <script src="js/universal-footer.js"></script>
  <script src="js/whatsapp-global.js"></script>
</body>
</html>
